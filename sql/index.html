
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Flint Email Lab</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Merriweather|Quicksand:400,500">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-1508445-1', 'auto');
        ga('send', 'pageview');
    </script>
    
</head>
<body>

    <div class="header">
        <h1><a href="/">Flint Email Lab Data</a></h1>
        <p class="lead">
           <a href="search.html">search</a>
        </p>
    </div>
    <div class="content">
        
<div class="container">
    <div class="row">
        <div class="col-sm-8">
            <h1>Flint Email Data</h1>
            <p class="lead">Providing API access to researchers</p>
            <p></p>            
        </div>
    </div>

    <h1>How to use the API</h1>
    <h2 id="usage">Usage</h2>

<p>The 'emails' table contains the following columns:</p>


        "id",
        "sender",
        "email_to",
        "subject",
        "attachments",
        "cc",
        "timestamp",
        "email_order",
        "full_email",
        "header",
        "email_id",
        "pages",
        "bookmark",
        "pdf",
        "bm_title",
        "acode",
        "bcode"


<h3 id="list">List</h3>

<p>List all emails.</p>

<pre><code>GET http://s-lib007.lib.uiowa.edu/flint/api.php/records/emails
</code></pre>
<p>note: Listing ALL data is <em>not</em> recommended. See rules for filtering and searching below.</p>

<h3 id="listtransform">List + Transform</h3>

<p>List all records and transform them to objects (as formatted in the read operation below).</p>

<pre><code>GET http://s-lib007.lib.uiowa.edu/flint/api.php/records/emails?transform=1
</code></pre>
<p>note: This transform is CPU and memory intensive.</p>

<h3 id="read">Read</h3>

<p>If you want to read a single object you can use:</p>

<pre><code>GET http://s-lib007.lib.uiowa.edu/flint/api.php/records/emails/1
</code></pre>

<p>Output:</p>

<pre><code>{
    "id": 1,
    "sender": "Travis, Rashmi",
    "email_to": "Wells, Eden,Eisner, Jennifer",
    "subject": "RE: Drinking Water",
    "attachments": "false",
    "cc": "Peeler, Nancy,Miller, Amy,Lishinski, Karen,Minicuci, Angela",
    "timestamp": 1444153600,
    "email_order": 1,
    "full_email": "From: Travis, Rashmi (DHHS)\n\nSent: Tuesday, October 06, 2015 12:46 PM\n\nTo: Wells, Eden (DHHS);Eisner, Jennifer (DHHS)\n\nCe: Peeler, Nancy (DHHS);Miller, Amy J. (DHHS);Lishinski, Karen (DHHS);Minicuci, Angela\n(DHHS)\n\nSubject: RE: Drinking Water\n\nRashmi's comments:\n\n| can't remember if we have another document on this, but since this is going out to parents, do we want to include a\nfew lines on what happens when you have a high lead level? | know we have specific brochures on eating the right\nfoods, etc. Also, do we want to include a line that indicates these lead sources may be in your home or caregivers homes\nwhere your child visits or is cared for? Just a thought.... since some of the children spend many hours away from their\nhome base.",
    "header": "From: Travis, Rashmi (DHHS)\n\nSent: Tuesday, October 06, 2015 12:46 PM\n\nTo: Wells, Eden (DHHS);Eisner, Jennifer (DHHS)\n\nCe: Peeler, Nancy (DHHS);Miller, Amy J. (DHHS);Lishinski, Karen (DHHS);Minicuci, Angela\n(DHHS)\n\nSubject: RE: Drinking Water",
    "email_id": "DHHS01_b01_001_003-e1",
    "pages": "DHHS01_b01_001_003_1.txt",
    "bookmark": "DHHS01_b01_001_003",
    "pdf": "DHHS01",
    "bm_title": "DCN00581440",
    "acode": 1,
    "bcode": 1
}
</code></pre>

<h3 id="readmultiple">Read (multiple)</h3>

<p>If you want to read multiple objects you can use:</p>

<pre><code>GET http://s-lib007.lib.uiowa.edu/flint/api.php/records/emails/1,2
</code></pre>

<p>Output:</p>

<pre><code>[
    {
      "id": 1,
      "sender": "Travis, Rashmi",
      "email_to": "Wells, Eden,Eisner, Jennifer",
      "subject": "RE: Drinking Water",
      "attachments": "false",
      "cc": "Peeler, Nancy,Miller, Amy,Lishinski, Karen,Minicuci, Angela",
      "timestamp": 1444153600,
      "email_order": 1,
      "full_email": "From: Travis, Rashmi (DHHS)\n\nSent: Tuesday, October 06, 2015 12:46 PM\n\nTo: Wells, Eden (DHHS);Eisner, Jennifer (DHHS)\n\nCe: Peeler, Nancy (DHHS);Miller, Amy J. (DHHS);Lishinski, Karen (DHHS);Minicuci, Angela\n(DHHS)\n\nSubject: RE: Drinking Water\n\nRashmi's comments:\n\n| can't remember if we have another document on this, but since this is going out to parents, do we want to include a\nfew lines on what happens when you have a high lead level? | know we have specific brochures on eating the right\nfoods, etc. Also, do we want to include a line that indicates these lead sources may be in your home or caregivers homes\nwhere your child visits or is cared for? Just a thought.... since some of the children spend many hours away from their\nhome base.",
      "header": "From: Travis, Rashmi (DHHS)\n\nSent: Tuesday, October 06, 2015 12:46 PM\n\nTo: Wells, Eden (DHHS);Eisner, Jennifer (DHHS)\n\nCe: Peeler, Nancy (DHHS);Miller, Amy J. (DHHS);Lishinski, Karen (DHHS);Minicuci, Angela\n(DHHS)\n\nSubject: RE: Drinking Water",
      "email_id": "DHHS01_b01_001_003-e1",
      "pages": "DHHS01_b01_001_003_1.txt",
      "bookmark": "DHHS01_b01_001_003",
      "pdf": "DHHS01",
      "bm_title": "DCN00581440",
      "acode": 1,
      "bcode": 1
    },
    {
      "id": 2,
      "sender": "Wells, Eden",
      "email_to": "Eisner, Jennifer",
      "subject": "Re: Drinking Water",
      "attachments": "false",
      "cc": "Peeler, Nancy,Miller, Amy,Lishinski, Karen,Travis, Rashmi,Minicuci, Angela",
      "timestamp": 1444153400,
      "email_order": 2,
      "full_email": "From: Wells, Eden (DHHS)\n\nSent: Tuesday, October 06, 2015 12:43 PM\n\nTo: Eisner, Jennifer (DHHS)\n\nCc: Peeler, Nancy (DHHS); Miller, Amy J. (DHHS); Lishinski, Karen (DHHS); Travis, Rashmi (DHHS); Minicuci, Angela (DHHS)\nSubject: Re: Drinking Water\n\nsee Rashmi's as well-",
      "header": "From: Wells, Eden (DHHS)\n\nSent: Tuesday, October 06, 2015 12:43 PM\n\nTo: Eisner, Jennifer (DHHS)\n\nCc: Peeler, Nancy (DHHS); Miller, Amy J. (DHHS); Lishinski, Karen (DHHS); Travis, Rashmi (DHHS); Minicuci, Angela (DHHS)\nSubject: Re: Drinking Water",
      "email_id": "DHHS01_b01_001_003-e2",
      "pages": "DHHS01_b01_001_003_1.txt",
      "bookmark": "DHHS01_b01_001_003",
      "pdf": "DHHS01",
      "bm_title": "DCN00581440",
      "acode": 1,
      "bcode": 1
    }
  ]
</code></pre>

<h3 id="listfilter">List + Filter</h3>

<p>Search is implemented with the "filter" parameter. You need to specify the column name, a comma, the match type, another commma and the value you want to filter on. These are supported match types:</p>

<ul>
<li>cs: contain string (string contains value)</li>

<li>sw: start with (string starts with value)</li>

<li>ew: end with (string end with value)</li>

<li>eq: equal (string or number matches exactly)</li>

<li>lt: lower than (number is lower than value)</li>

<li>le: lower or equal (number is lower than or equal to value)</li>

<li>ge: greater or equal (number is higher than or equal to value)</li>

<li>gt: greater than (number is higher than value)</li>

<li>bt: between (number is between two comma separated values)</li>

<li>in: in (number or string is in comma separated list of values)</li>

<li>is: is null (field contains "NULL" value)</li>
</ul>

<p>Example: list all emails after October 6, 2015 5:46:40 PM GMT</p>
<pre><code>GET http://s-lib007.lib.uiowa.edu/flint/api.php/records/emails?filter=timestamp,gt,1444153600</code></pre>

<p>Example: list all emails by Mark Miller</p>
<pre><code>GET http://s-lib007.lib.uiowa.edu/flint/api.php/records/emails?filter=sender,cs,Miller,%20Mark</code></pre>

<p>You can negate all filters by prepending a 'n' character, so that 'eq' becomes 'neq'.</p>

<pre><code>GET http://s-lib007.lib.uiowa.edu/flint/api.php/records/emails?filter=email_id,sw,DHH
GET http://s-lib007.lib.uiowa.edu/flint/api.php/records/emails?filter=id,le,1
GET http://s-lib007.lib.uiowa.edu/flint/api.php/records/emails?filter=id,ngt,2
</code></pre>

<p>note: You may specify table name before the field name, seperated with a dot.</p>

<h3 id="listfiltersatisfy">List + Filter + Satisfy</h3>

<p>Multiple filters can be applied by using "filter[]" instead of "filter" as a parameter name. Then the parameter "satisfy" is used to indicate whether "all" (default) or "any" filter should be satisfied to lead to a match:</p>

<pre><code>GET http://s-lib007.lib.uiowa.edu/flint/api.php/records/emails?filter[]=id,eq,1&amp;filter[]=id,eq,3&amp;satisfy=any
GET http://s-lib007.lib.uiowa.edu/flint/api.php/records/emails?filter[]=id,ge,1&amp;filter[]=id,le,3&amp;satisfy=all
GET http://s-lib007.lib.uiowa.edu/flint/api.php/records/emails?filter[]=id,ge,1&amp;filter[]=id,le,3&amp;satisfy=emails.all
GET http://s-lib007.lib.uiowa.edu/flint/api.php/records/emails?filter[]=id,ge,1&amp;filter[]=id,le,3
</code></pre>

<h3 id="listcolumnselection">List + Column selection</h3>

<p>By default all columns are selected. With the "columns" parameter you can select specific columns. Multiple columns should be comma separated. 
An asterisk ("*") may be used as a wildcard to indicate "all columns". Similar to "columns" you may use the "exclude" parameter to remove certain columns:</p>

<pre><code>GET http://s-lib007.lib.uiowa.edu/flint/api.php/records/emails?columns=pages
GET http://s-lib007.lib.uiowa.edu/flint/api.php/records/emails?columns=emails.pages
GET http://s-lib007.lib.uiowa.edu/flint/api.php/records/emails?exclude=emails.id
</code></pre>

<p>note: Columns that are used to include related entities are automatically added and cannot be left out of the output.</p>

<h3 id="listorder">List + Order</h3>

<p>With the "order" parameter you can sort. By default the sort is in ascending order, but by specifying "desc" this can be reversed:</p>

<pre><code>GET http://s-lib007.lib.uiowa.edu/flint/api.php/records/emails?order=sender,email_to,subject
GET http://s-lib007.lib.uiowa.edu/flint/api.php/speaking?order[]=sender,cc&amp;order[]=id
</code></pre>

<p>note: You may sort on multiple fields by using "order[]" instead of "order" as a parameter name.</p>

<h3 id="listorderpagination">List + Order + Pagination</h3>

<p>The "page" parameter holds the requested page. The default page size is 20, but can be adjusted (e.g. to 50):</p>

<pre><code>GET http://s-lib007.lib.uiowa.edu/flint/api.php/records/emails?order=id&amp;page=1
GET http://s-lib007.lib.uiowa.edu/flint/api.php/records/emails?order=id&amp;page=1,50
</code></pre>

<p>note: Pages that are not ordered cannot be paginated.</p>

</div>

    </div>
    <div class="footer">
        
    </div>

</body>
</html>